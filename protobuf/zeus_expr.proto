syntax = "proto3";

import "zeus_meta.proto";

option java_package = "io.github.zeus.rpc";
option java_multiple_files = true;


enum ExpressionType {
    LITERAL = 0;
    COLUMN_REF = 1;
    SCALA_FUNCTION = 2;
    AGG_FUNCTION = 3;
}

enum ScalarFuncId {
    ADD_INT4_INT4 = 0;
}

enum AggFuncId {
    SUM_INT4_INT = 0;
}

message LiteralExpression {
    ColumnType type = 1;
    bytes payload = 2;
}

message ColumnRef {
    string name = 1;
}

message ScalarFunction {
    ScalarFuncId funcId = 1;
    repeated Expression children = 2;
}

message AggFunction {
    AggFuncId func_id = 1;
    repeated Expression children = 2;
}

message Expression {
    ExpressionType type = 1;

    LiteralExpression literal = 2;
    ColumnRef column = 3;
    ScalarFunction scala_func = 4;
    AggFunction agg_func = 5;
}


